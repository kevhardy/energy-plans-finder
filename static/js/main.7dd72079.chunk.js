(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{189:function(e,a,t){e.exports=t(328)},197:function(e,a,t){},198:function(e,a,t){},207:function(e,a,t){},323:function(e,a,t){},324:function(e,a,t){},325:function(e,a,t){},328:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(45),c=t.n(l),o=(t(194),t(111)),i=t.n(o),m=t(158),s=t(23),u=t(110),d=t(46),p=(t(197),Object(n.createContext)({})),E=t(337),h=t(344),f=(t(198),t(159)),g=t.n(f),v=t(339),b=t(336),w=t(36);t(207);var C=Object(d.d)(function(e){var a=Object(n.useState)(""),t=Object(s.a)(a,2),l=t[0],c=t[1],o=Object(n.useContext)(p),i=o.isLoading,m=o.handleZipSubmit;function u(a){a.preventDefault(),e.history.push("/app/results?zipcode=".concat(l)),m(l)}return Object(n.useEffect)(function(){if("/app/results"===e.location.pathname){var a=g.a.parse(e.location.search).zipcode;a&&c(a),i||m(a)}},[]),r.a.createElement("div",{className:"container-zipform"},r.a.createElement(v.a,{onSubmit:u,className:"zipform"},r.a.createElement(v.a.Field,{name:"zipcode"},r.a.createElement(b.a,{name:"zipcode",value:l,icon:!0,onChange:function(e){(""===e.target.value||/^[0-9\b]+$/.test(e.target.value))&&c(e.target.value)},maxLength:"5",autoComplete:"off",focus:!0,placeholder:"Enter ZIP Code",loading:i},r.a.createElement("input",null),r.a.createElement(w.a,{name:"search",link:!0,onClick:u})))))});function k(e){return r.a.createElement("div",{className:"home-main"},r.a.createElement(E.a,{hidden:!0}),r.a.createElement(h.a,{className:"header-main",as:"h1"},"TX Energy Plans"),r.a.createElement("p",{className:"header-info"},"View and compare plans offered in your area. Get started by entering in your ",r.a.createElement("strong",null,"ZIP code")," down below."),r.a.createElement(E.a,{hidden:!0}),r.a.createElement(C,null))}t(323);var y=t(341),_=t(338),N=(t(324),t(335)),S=(t(325),t(173)),O=t.n(S),L=t(342),j=t(340),x=r.a.memo(function(e){var a=e.name,t=e.contractLength,n=e.planType,l=e.renewablePercent;return r.a.createElement(y.a.Cell,null,r.a.createElement(j.a,null,r.a.createElement(j.a.Item,null,r.a.createElement(j.a.Header,null,"Plan Name"),a),r.a.createElement(j.a.Item,null,r.a.createElement(j.a.Header,null,"Contract Length"),t?t+" month":"None",t>1?"s":""),r.a.createElement(j.a.Item,null,r.a.createElement(j.a.Header,null,"Plan Type"),n," Rate"),r.a.createElement(j.a.Item,null,r.a.createElement(j.a.Header,null,"Renewable Energy"),l)))}),R=r.a.memo(function(e){var a=e.details,t=e.eflURL,n=e.termsURL,l=a.slice(a.indexOf("$")+1,a.length);return r.a.createElement(y.a.Cell,null,r.a.createElement(j.a,null,r.a.createElement(j.a.Item,null,r.a.createElement(j.a.Header,null,"Cancellation Fee"),"0.00"!==l?"$"+l:"None"),r.a.createElement(E.a,{hidden:!0}),r.a.createElement(j.a.Item,null,r.a.createElement(j.a.Header,null,r.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},"Facts Sheet (EFL)"))),r.a.createElement(j.a.Item,null,r.a.createElement(j.a.Header,null,r.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},"Terms of Service")))))});function H(e){var a=Object(n.useState)(0),t=Object(s.a)(a,2),l=t[0],c=t[1],o=e.isChecked,i=e.plan,m=i.plan_name,u=i.pricing_details,d=i.renewable_energy_description,p=i.term_value,E=i.rate_type,h=i.fact_sheet,f=i.terms_of_service;function g(e,a){c(1===l?0:1)}var v=r.a.createElement(y.a,{className:"details-table",unstackable:!0},r.a.createElement(y.a.Header,null,r.a.createElement(y.a.Row,null,r.a.createElement(y.a.HeaderCell,null,"Plan Details"),r.a.createElement(y.a.HeaderCell,null,"Pricing"))),r.a.createElement(y.a.Body,null,r.a.createElement(y.a.Row,null,r.a.createElement(x,{name:m,renewablePercent:d,planType:E,contractLength:p}),r.a.createElement(R,{details:u,eflURL:h,termsURL:f}))));return r.a.createElement(y.a.Row,{positive:o},r.a.createElement(y.a.Cell,{colSpan:"12",className:"accordion-row",style:{padding:"0",paddingTop:"0"}},r.a.createElement(L.a,{className:"accordion-cursor"},r.a.createElement(L.a.Title,{className:"plan-dropdown"+(1===l?" hidden":""),active:1!==l,index:0,onClick:g},r.a.createElement("p",{style:{fontSize:".8rem",textAlign:"center",marginBottom:"2px"}},"More Details"),r.a.createElement(w.a,{className:"dropdown-icon",name:"dropdown"})),r.a.createElement(L.a.Content,{active:1===l},r.a.createElement(O.a,{animateOpacity:!0,duration:300,height:l?"auto":0},v,r.a.createElement("div",{className:"plan-dropup accordion-cursor",onClick:g},r.a.createElement(w.a,{className:"dropup-icon",name:"dropdown",onClick:g})))))))}function P(){var e=Object(n.useState)(window.innerWidth),a=Object(s.a)(e,2),t=a[0],r=a[1];return Object(n.useEffect)(function(){var e=function(){return r(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),t}var z=t(343),T=t(345),I=r.a.memo(function(e){var a=e.logo,t=e.rating;return r.a.createElement(y.a.Cell,{className:"company-cell"},r.a.createElement("div",{style:{backgroundImage:"url("+a+")"},className:"company-logo",alt:"Company's logo"}),r.a.createElement("div",{style:{margin:"1rem 0 0"}},"Rating"," ",r.a.createElement(z.a,{trigger:r.a.createElement(w.a,{style:{marginLeft:".85rem"},name:"question circle outline"}),content:"The Company Rating is based on the ratio of customer complaints a company has received in the past 6 months compared to other companies. The more stars a company has, the lower the complaint ratio.",position:"right center"})),t&&-1!==t?r.a.createElement(T.a,{icon:"star",defaultRating:t,maxRating:5,size:"tiny",disabled:!0}):r.a.createElement("p",{style:{fontSize:".75rem"}},r.a.createElement("strong",null,"Not Available")))}),A=r.a.memo(function(e){var a=e.sortedState,t=e.price,n=e.priceLevel;return r.a.createElement(y.a.Cell,{positive:a.column===n&&"ascending"===a.direction,negative:a.column===n&&"descending"===a.direction},r.a.createElement(h.a,{as:"h4",textAlign:"center"},t.toFixed(1),"\xa2"))});function F(e){var a=Object(n.useState)(!1),t=Object(s.a)(a,2),l=t[0],c=t[1],o=Object(n.useContext)(p),i=o.compareList,m=o.setCompareList,u=P(),d=e.sortedState,E=e.plan,h=E.plan_id,f=E.company_logo,g=E.rating_total,v=E.price_kwh500,b=E.price_kwh1000,w=E.price_kwh2000,C=e.plan,k=C.plan_name,_=C.pricing_details,S=C.renewable_energy_description,O=C.term_value,L=C.rate_type,j=C.fact_sheet,z=C.terms_of_service;var T=r.a.createElement(y.a.Row,{positive:l},r.a.createElement(I,{logo:f,rating:g}),u>=768&&r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{name:k,renewablePercent:S,planType:L,contractLength:O}),r.a.createElement(R,{details:_,eflURL:j,termsURL:z})),r.a.createElement(A,{price:v,priceLevel:"500",sortedState:d}),r.a.createElement(A,{price:b,priceLevel:"1000",sortedState:d}),r.a.createElement(A,{price:w,priceLevel:"2000",sortedState:d}),r.a.createElement(y.a.Cell,{className:"checkbox-cell",textAlign:"right",collapsing:!0},r.a.createElement(N.a,{name:"isChecked",checked:l,onChange:function(e,a){e.preventDefault(),console.log(e.target.value),a.checked?(c(!0),m(i.concat([h]))):(c(!1),m(i.filter(function(e){return e!==h})))}})));return r.a.createElement(r.a.Fragment,null,T,u<768&&r.a.createElement(H,{plan:e.plan,isChecked:l}))}var U=r.a.memo(function(e){var a=e.isLoading,t=e.sortedState,n=e.handleSort,l=P();return r.a.createElement(y.a.Header,null,r.a.createElement(y.a.Row,{disabled:a},r.a.createElement(y.a.HeaderCell,{textAlign:"left"},"Company"),l>=768&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a.HeaderCell,{textAlign:"center"},"Plan Details"),r.a.createElement(y.a.HeaderCell,{textAlign:"center"},"Pricing")),r.a.createElement(y.a.HeaderCell,{sorted:"500"===t.column?t.direction:null,onClick:function(){return n("500")},collapsing:!0,textAlign:"center"},"500 ",r.a.createElement("br",null),r.a.createElement("span",{className:"kwh-header"},"kWh")),r.a.createElement(y.a.HeaderCell,{sorted:"1000"===t.column?t.direction:null,onClick:function(){return n("1000")},collapsing:!0,textAlign:"center"},"1000 ",r.a.createElement("br",null),r.a.createElement("span",{className:"kwh-header"},"kWh")),r.a.createElement(y.a.HeaderCell,{sorted:"2000"===t.column?t.direction:null,onClick:function(){return n("2000")},collapsing:!0,textAlign:"center"},"2000 ",r.a.createElement("br",null),r.a.createElement("span",{className:"kwh-header"},"kWh")),r.a.createElement(y.a.HeaderCell,{className:"checkbox-headerCell"})))});function D(){var e=Object(n.useContext)(p),a=e.plans,t=e.setPlans,l=e.isLoading,c=Object(n.useState)({column:null,direction:null}),o=Object(s.a)(c,2),i=o[0],m=o[1];Object(n.useEffect)(function(){l&&m({column:null,direction:null})});var u=a.slice(0,10).map(function(e){return r.a.createElement(F,{key:e.plan_id,plan:e,sortedState:i})});return r.a.createElement(y.a,{className:"plan-table",sortable:!0,unstackable:!0},r.a.createElement(U,{sortedState:i,isLoading:l,handleSort:function(e){if(i.column===e)t(a.reverse()),m({column:i.column,direction:"ascending"===i.direction?"descending":"ascending"});else switch(m({column:e,direction:"ascending"}),e){case"500":t(a.sort(function(e,a){return e.price_kwh500-a.price_kwh500}));break;case"1000":t(a.sort(function(e,a){return e.price_kwh1000-a.price_kwh1000}));break;case"2000":t(a.sort(function(e,a){return e.price_kwh2000-a.price_kwh2000}))}}}),r.a.createElement(y.a.Body,null,l?r.a.createElement(y.a.Row,null,r.a.createElement(y.a.Cell,{colSpan:"12"},r.a.createElement(_.a,{active:l,inline:"centered"}))):a.length?u:r.a.createElement(y.a.Row,null,r.a.createElement(y.a.Cell,{colSpan:"12"},"No results found."))))}function W(e){return r.a.createElement("div",null,r.a.createElement(E.a,{hidden:!0}),r.a.createElement("div",{className:"container-header"},r.a.createElement("div",{className:"header-home"},r.a.createElement(w.a,{name:"home",size:"large",link:!0,onClick:function(){e.history.push("/")}})),r.a.createElement(h.a,{className:"header-results",as:"h1"},"TX Energy Plans"),r.a.createElement("div",{className:"header-spacer"})),r.a.createElement(C,null),r.a.createElement(D,null))}c.a.render(r.a.createElement(function(){var e=Object(n.useState)([]),a=Object(s.a)(e,2),t=a[0],l=a[1],c=Object(n.useState)(!1),o=Object(s.a)(c,2),E=o[0],h=o[1],f=Object(n.useState)([]),g=Object(s.a)(f,2),v=g[0],b=g[1];function w(){return(w=Object(m.a)(i.a.mark(function e(a){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://cors-anywhere.herokuapp.com/http://www.powertochoose.org/en-us/service/v1/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parameters:{method:"plans",zip_code:a}})});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,console.dir(n),console.dir(n.map(function(e){return e.plan_id}).sort()),l(n),h(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[0,13]])}))).apply(this,arguments)}return r.a.createElement(u.a,{basename:"/energy-plans-viewer"},r.a.createElement(p.Provider,{value:{plans:t,setPlans:l,isLoading:E,compareList:v,setCompareList:b,handleZipSubmit:function(e){h(!0),/^[0-9]{5}$/.test(e)?function(e){w.apply(this,arguments)}(e):l([])}}},r.a.createElement("main",null,r.a.createElement(d.a,{exact:!0,path:"/",component:k}),r.a.createElement(d.a,{path:"/app/results",component:W}))))},null),document.getElementById("root"))}},[[189,1,2]]]);
//# sourceMappingURL=main.7dd72079.chunk.js.map