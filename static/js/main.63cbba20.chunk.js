(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{191:function(e,a,t){e.exports=t(330)},199:function(e,a,t){},200:function(e,a,t){},209:function(e,a,t){},325:function(e,a,t){},326:function(e,a,t){},327:function(e,a,t){},330:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(46),c=t.n(l),o=(t(196),t(66)),i=t.n(o),s=t(24),m=t(113),u=t(112),d=t(47),p=(t(199),Object(n.createContext)({})),E=t(339),h=t(346),f=(t(200),t(160)),g=t.n(f),v=t(341),b=t(338),w=t(37);t(209);var y=Object(d.d)(function(e){var a=Object(n.useState)(""),t=Object(s.a)(a,2),l=t[0],c=t[1],o=Object(n.useContext)(p),i=o.state,m=o.handleZipSubmit;function u(a){a.preventDefault(),/^[0-9]{5}$/.test(l)&&(e.history.push("/app/results?zipcode=".concat(l)),m(l))}return Object(n.useEffect)(function(){if("/app/results"===e.location.pathname){var a=g.a.parse(e.location.search).zipcode;a&&/^[0-9]{5}$/.test(a)?(c(a),i.isLoading||m(a)):c("")}},[]),r.a.createElement("div",{className:"container-zipform"},r.a.createElement(v.a,{onSubmit:u,className:"zipform"},r.a.createElement(v.a.Field,{name:"zipcode"},r.a.createElement(b.a,{name:"zipcode",value:l,icon:!0,onChange:function(e){(""===e.target.value||/^[0-9\b]+$/.test(e.target.value))&&c(e.target.value)},maxLength:"5",autoComplete:"off",focus:!0,placeholder:"Enter ZIP Code",loading:i.isLoading},r.a.createElement("input",null),r.a.createElement(w.a,{name:"search",link:!0,onClick:u})))))});function C(e){return r.a.createElement("div",{className:"home-main"},r.a.createElement(E.a,{hidden:!0}),r.a.createElement(h.a,{className:"header-main",as:"h1"},"TX Energy Plans"),r.a.createElement("p",{className:"header-info"},"View and compare plans offered in your area. Get started by entering in your ",r.a.createElement("strong",null,"ZIP code")," down below."),r.a.createElement(E.a,{hidden:!0}),r.a.createElement(y,null))}var k=t(179),O=t(33),j={plans:[],filteredPlans:[],comparePlans:[],isLoading:!1};function _(e,a){switch(a.type){case"update":return Object(O.a)({},e,{plans:a.plans,filteredPlans:a.plans.slice()});case"loading":return Object(O.a)({},e,{isLoading:!e.isLoading});case"addCompare":return Object(O.a)({},e,{comparePlans:[].concat(Object(k.a)(e.comparePlans),[a.planID])});case"removeCompare":return Object(O.a)({},e,{comparePlans:e.comparePlans.filter(function(e){return e!==a.planID})});case"sort":switch(a.column){case"500":return Object(O.a)({},e,{filteredPlans:e.filteredPlans.slice().sort(function(e,a){return e.price_kwh500-a.price_kwh500})});case"1000":return Object(O.a)({},e,{filteredPlans:e.filteredPlans.slice().sort(function(e,a){return e.price_kwh1000-a.price_kwh1000})});case"2000":return Object(O.a)({},e,{filteredPlans:e.filteredPlans.slice().sort(function(e,a){return e.price_kwh2000-a.price_kwh2000})});case"company":return Object(O.a)({},e,{filteredPlans:e.filteredPlans.slice().sort(function(e,a){var t=e.company_name.toLowerCase(),n=a.company_name.toLowerCase();return t<n?-1:t>n?1:0})});case"reverse":return Object(O.a)({},e,{filteredPlans:e.filteredPlans.slice().reverse()});default:return e}default:return e}}var N=function(){return Object(n.useReducer)(_,j)},P=(t(325),t(343)),x=t(340);t(326);var L=t(337),S=(t(327),t(174)),R=t.n(S),H=t(344),I=t(342),z=r.a.memo(function(e){var a=e.name,t=e.contractLength,n=e.planType,l=e.renewablePercent;return r.a.createElement(P.a.Cell,{className:"details-cell",singleLine:!0},r.a.createElement(I.a,null,r.a.createElement(I.a.Item,null,r.a.createElement(I.a.Header,null,"Plan Name"),a.length<26?a:a.slice(0,25)+"..."),r.a.createElement(I.a.Item,null,r.a.createElement(I.a.Header,null,"Contract Length"),t?t+" month":"None",t>1?"s":""),r.a.createElement(I.a.Item,null,r.a.createElement(I.a.Header,null,"Plan Type"),n," Rate"),r.a.createElement(I.a.Item,null,r.a.createElement(I.a.Header,null,"Renewable Energy"),l)))}),T=r.a.memo(function(e){var a=e.details,t=e.eflURL,n=e.termsURL,l=a.slice(a.lastIndexOf("$")+1,a.length);return r.a.createElement(P.a.Cell,null,r.a.createElement(I.a,null,r.a.createElement(I.a.Item,null,r.a.createElement(I.a.Header,null,"Cancellation Fee"),"0.00"!==l?"$"+l:"None"),r.a.createElement(E.a,{hidden:!0}),r.a.createElement(I.a.Item,null,r.a.createElement(I.a.Header,null,r.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},"Facts Sheet (EFL)"))),r.a.createElement(I.a.Item,null,r.a.createElement(I.a.Header,null,r.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},"Terms of Service")))))});function A(e){var a=Object(n.useState)(0),t=Object(s.a)(a,2),l=t[0],c=t[1],o=e.isChecked,i=e.plan,m=i.plan_name,u=i.pricing_details,d=i.renewable_energy_description,p=i.term_value,E=i.rate_type,h=i.fact_sheet,f=i.terms_of_service;function g(e,a){c(1===l?0:1)}var v=r.a.createElement(P.a,{className:"details-table",columns:2,unstackable:!0},r.a.createElement(P.a.Header,null,r.a.createElement(P.a.Row,null,r.a.createElement(P.a.HeaderCell,{width:1},"Plan Details"),r.a.createElement(P.a.HeaderCell,{width:1},"Pricing"))),r.a.createElement(P.a.Body,null,r.a.createElement(P.a.Row,null,r.a.createElement(z,{name:m,renewablePercent:d,planType:E,contractLength:p}),r.a.createElement(T,{details:u,eflURL:h,termsURL:f}))));return r.a.createElement(P.a.Row,{positive:o},r.a.createElement(P.a.Cell,{colSpan:"12",className:"accordion-row",style:{padding:"0",paddingTop:"0"}},r.a.createElement(H.a,{className:"accordion-cursor"},r.a.createElement(H.a.Title,{className:"plan-dropdown"+(1===l?" hidden":""),active:1!==l,index:0,onClick:g},r.a.createElement("p",{style:{fontSize:".8rem",textAlign:"center",marginBottom:"2px"}},"More Details"),r.a.createElement(w.a,{className:"dropdown-icon",name:"dropdown"})),r.a.createElement(H.a.Content,{active:1===l},r.a.createElement(R.a,{animateOpacity:!0,duration:300,height:l?"auto":0},v,r.a.createElement("div",{className:"plan-dropup accordion-cursor",onClick:g},r.a.createElement(w.a,{className:"dropup-icon",name:"dropdown",onClick:g})))))))}var D=t(345),F=t(347),U=r.a.memo(function(e){var a=e.logo,t=e.rating;return r.a.createElement(P.a.Cell,{className:"company-cell"},r.a.createElement("div",{style:{backgroundImage:"url("+a+")"},className:"company-logo",alt:"Company's logo"}),r.a.createElement("div",{style:{margin:"1rem 0 0"}},"Rating"," ",r.a.createElement(D.a,{trigger:r.a.createElement(w.a,{style:{marginLeft:".85rem"},name:"question circle outline"}),content:"The Company Rating is based on the ratio of customer complaints a company has received in the past 6 months compared to other companies. The more stars a company has, the lower the complaint ratio.",position:"right center"})),t&&-1!==t?r.a.createElement(F.a,{icon:"star",defaultRating:t,maxRating:5,size:"tiny",disabled:!0}):r.a.createElement("p",{style:{fontSize:".75rem"}},r.a.createElement("strong",null,"Not Available")))}),W=r.a.memo(function(e){var a=e.sortedState,t=e.price,n=e.priceLevel;return r.a.createElement(P.a.Cell,{positive:a.column===n&&"ascending"===a.direction,negative:a.column===n&&"descending"===a.direction},r.a.createElement(h.a,{as:"h4",textAlign:"center"},t.toFixed(1),"\xa2"))});function $(e){var a=Object(n.useState)(!1),t=Object(s.a)(a,2),l=t[0],c=t[1],o=Object(n.useContext)(p).dispatch,i=e.sortedState,m=e.width,u=e.plan,d=u.plan_id,E=u.company_logo,h=u.rating_total,f=u.price_kwh500,g=u.price_kwh1000,v=u.price_kwh2000,b=e.plan,w=b.plan_name,y=b.pricing_details,C=b.renewable_energy_description,k=b.term_value,O=b.rate_type,j=b.fact_sheet,_=b.terms_of_service;var N=r.a.createElement(P.a.Row,{positive:l},r.a.createElement(U,{logo:E,rating:h}),m>=768&&r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{name:w,renewablePercent:C,planType:O,contractLength:k}),r.a.createElement(T,{details:y,eflURL:j,termsURL:_})),r.a.createElement(W,{price:f,priceLevel:"500",sortedState:i}),r.a.createElement(W,{price:g,priceLevel:"1000",sortedState:i}),r.a.createElement(W,{price:v,priceLevel:"2000",sortedState:i}),r.a.createElement(P.a.Cell,{className:"checkbox-cell",textAlign:"right",collapsing:!0},r.a.createElement(L.a,{name:"isChecked",checked:l,onChange:function(e,a){e.preventDefault(),a.checked?(c(!0),o({type:"addCompare",planID:d})):(c(!1),o({type:"removeCompare",planID:d}))}})));return r.a.createElement(r.a.Fragment,null,N,m<768&&r.a.createElement(A,{plan:e.plan,isChecked:l}))}var B=r.a.memo(function(e){var a=e.isLoading,t=e.sortedState,n=e.handleSort,l=e.width;return r.a.createElement(P.a.Header,null,r.a.createElement(P.a.Row,{disabled:a},r.a.createElement(P.a.HeaderCell,{sorted:"company"===t.column?t.direction:null,onClick:function(){return n("company")},textAlign:"left"},"Company"),l>=768&&r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a.HeaderCell,{className:"details-header",textAlign:"center"},"Plan Details"),r.a.createElement(P.a.HeaderCell,{className:"pricing-header",textAlign:"center"},"Pricing")),r.a.createElement(P.a.HeaderCell,{sorted:"500"===t.column?t.direction:null,onClick:function(){return n("500")},collapsing:!0,textAlign:"center"},"500 ",r.a.createElement("br",null),r.a.createElement("span",{className:"kwh-header"},"kWh")),r.a.createElement(P.a.HeaderCell,{sorted:"1000"===t.column?t.direction:null,onClick:function(){return n("1000")},collapsing:!0,textAlign:"center"},"1000 ",r.a.createElement("br",null),r.a.createElement("span",{className:"kwh-header"},"kWh")),r.a.createElement(P.a.HeaderCell,{sorted:"2000"===t.column?t.direction:null,onClick:function(){return n("2000")},collapsing:!0,textAlign:"center"},"2000 ",r.a.createElement("br",null),r.a.createElement("span",{className:"kwh-header"},"kWh")),r.a.createElement(P.a.HeaderCell,{className:"checkbox-header"})))});function Z(){var e=Object(n.useContext)(p),a=e.state,t=e.dispatch,l=a.plans,c=a.filteredPlans,o=a.isLoading,i=Object(n.useState)({column:null,direction:null}),m=Object(s.a)(i,2),u=m[0],d=m[1],E=function(){var e=Object(n.useState)(window.innerWidth),a=Object(s.a)(e,2),t=a[0],r=a[1],l=Object(n.useCallback)(function(){r(window.innerWidth)},[]);return Object(n.useEffect)(function(){return window.addEventListener("resize",l),function(){window.removeEventListener("resize",l)}},[]),t}();Object(n.useEffect)(function(){o&&d({column:null,direction:null})});var h=c.slice(0,19).map(function(e){return r.a.createElement($,{key:e.plan_id,plan:e,sortedState:u,width:E})});return r.a.createElement(P.a,{className:"plan-table",sortable:!0,unstackable:!0},r.a.createElement(B,{sortedState:u,isLoading:o,handleSort:function(e){if(u.column!==e)return d({column:e,direction:"ascending"}),void t({type:"sort",column:e});d({column:u.column,direction:"ascending"===u.direction?"descending":"ascending"}),t({type:"sort",column:"reverse"})},width:E}),r.a.createElement(P.a.Body,null,o?r.a.createElement(P.a.Row,null,r.a.createElement(P.a.Cell,{colSpan:"12"},r.a.createElement(x.a,{active:o,inline:"centered"}))):l.length?h:r.a.createElement(P.a.Row,null,r.a.createElement(P.a.Cell,{colSpan:"12"},"No results found."))))}function J(e){var a=Object(n.useCallback)(function(){e.history.push("/")},[]);return r.a.createElement("div",null,r.a.createElement(E.a,{hidden:!0}),r.a.createElement("div",{className:"container-header"},r.a.createElement("div",{className:"header-home"},r.a.createElement(w.a,{name:"home",size:"large",link:!0,onClick:a})),r.a.createElement(h.a,{className:"header-results",as:"h1"},"TX Energy Plans"),r.a.createElement("div",{className:"header-spacer"})),r.a.createElement(y,null),r.a.createElement(Z,null))}function X(e){return q.apply(this,arguments)}function q(){return(q=Object(m.a)(i.a.mark(function e(a){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://cors-anywhere.herokuapp.com/http://www.powertochoose.org/en-us/service/v1/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parameters:{method:"plans",zip_code:a}})});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 14:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}c.a.render(r.a.createElement(function(){var e=N(),a=Object(s.a)(e,2),t=a[0],l=a[1],c=Object(n.useCallback)(function(){var e=Object(m.a)(i.a.mark(function e(a){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l({type:"loading"}),e.next=3,X(a);case 3:if(!(t=e.sent)){e.next=7;break}return e.next=7,l({type:"update",plans:t});case 7:return console.log(t),e.next=10,l({type:"loading"});case 10:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),[]);return r.a.createElement(u.a,{basename:"/energy-plans-viewer"},r.a.createElement(p.Provider,{value:{state:t,dispatch:l,handleZipSubmit:c}},r.a.createElement("main",null,r.a.createElement(d.a,{exact:!0,path:"/",component:C}),r.a.createElement(d.a,{path:"/app/results",component:J}))))},null),document.getElementById("root"))}},[[191,1,2]]]);
//# sourceMappingURL=main.63cbba20.chunk.js.map