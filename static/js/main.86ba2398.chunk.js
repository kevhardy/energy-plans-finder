(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{190:function(e,a,t){e.exports=t(329)},198:function(e,a,t){},199:function(e,a,t){},208:function(e,a,t){},324:function(e,a,t){},325:function(e,a,t){},326:function(e,a,t){},329:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(45),c=t.n(r),o=(t(195),t(111)),i=t.n(o),m=t(158),s=t(25),u=t(110),d=t(46),p=(t(198),Object(n.createContext)({})),E=t(338),h=t(345),f=(t(199),t(159)),g=t.n(f),v=t(340),b=t(337),w=t(35);t(208);var y=Object(d.d)(function(e){var a=Object(n.useState)(""),t=Object(s.a)(a,2),r=t[0],c=t[1],o=Object(n.useContext)(p),i=o.isLoading,m=o.handleZipSubmit;function u(a){a.preventDefault(),e.history.push("/app/results?zipcode=".concat(r)),m(r)}return Object(n.useEffect)(function(){if("/app/results"===e.location.pathname){var a=g.a.parse(e.location.search).zipcode;a&&c(a),i||m(a)}},[]),l.a.createElement("div",{className:"container-zipform"},l.a.createElement(v.a,{onSubmit:u,className:"zipform"},l.a.createElement(v.a.Field,{name:"zipcode"},l.a.createElement(b.a,{name:"zipcode",value:r,icon:!0,onChange:function(e){(""===e.target.value||/^[0-9\b]+$/.test(e.target.value))&&c(e.target.value)},maxLength:"5",autoComplete:"off",focus:!0,placeholder:"Enter ZIP Code",loading:i},l.a.createElement("input",null),l.a.createElement(w.a,{name:"search",link:!0,onClick:u})))))});function C(e){return l.a.createElement("div",{className:"home-main"},l.a.createElement(E.a,{hidden:!0}),l.a.createElement(h.a,{className:"header-main",as:"h1"},"TX Energy Plans"),l.a.createElement("p",{className:"header-info"},"View and compare plans offered in your area. Get started by entering in your ",l.a.createElement("strong",null,"ZIP code")," down below."),l.a.createElement(E.a,{hidden:!0}),l.a.createElement(y,null))}t(324);var k=t(341),S=t(339),N=(t(325),t(178)),O=t(173),_=t.n(O),j=t(336),x=t(343),L=(t(326),t(344)),R=t(346);function H(e){var a=e.logo,t=e.rating;return l.a.createElement(k.a.Cell,{className:"company-cell"},l.a.createElement("div",{style:{backgroundImage:"url("+a+")"},className:"company-logo",alt:"Company's logo"}),l.a.createElement("div",{style:{margin:"1rem 0 0"}},"Rating"," ",l.a.createElement(L.a,{trigger:l.a.createElement(w.a,{style:{marginLeft:".85rem"},name:"question circle outline"}),content:"The Company Rating is based on the ratio of customer complaints a company has received in the past 6 months compared to other companies. The more stars a company has, the lower the complaint ratio.",position:"right center"})),t&&-1!==t?l.a.createElement(R.a,{icon:"star",defaultRating:t,maxRating:5,size:"tiny",disabled:!0}):l.a.createElement("p",{style:{fontSize:".75rem"}},l.a.createElement("strong",null,"Not Available")))}function z(e){var a=e.sortedState,t=e.price,n=e.priceLevel;return l.a.createElement(k.a.Cell,{positive:a.column===n&&"ascending"===a.direction,negative:a.column===n&&"descending"===a.direction},l.a.createElement(h.a,{as:"h4",textAlign:"center"},t.toFixed(1),"\xa2"))}var P=t(342);function T(e){var a=e.name,t=e.contractLength,n=e.planType,r=e.renewablePercent;return l.a.createElement(k.a.Cell,null,l.a.createElement(P.a,null,l.a.createElement(P.a.Item,null,l.a.createElement(P.a.Header,null,"Plan Name"),a),l.a.createElement(P.a.Item,null,l.a.createElement(P.a.Header,null,"Contract Length"),t?t+" month":"None",t>1?"s":""),l.a.createElement(P.a.Item,null,l.a.createElement(P.a.Header,null,"Plan Type"),n," Rate"),l.a.createElement(P.a.Item,null,l.a.createElement(P.a.Header,null,"Renewable Energy"),r)))}function I(e){var a=e.details,t=e.eflURL,n=e.termsURL,r=a.slice(a.indexOf("$")+1,a.length);return l.a.createElement(k.a.Cell,null,l.a.createElement(P.a,null,l.a.createElement(P.a.Item,null,l.a.createElement(P.a.Header,null,"Cancellation Fee"),"0.00"!==r?"$"+r:"None"),l.a.createElement(E.a,{hidden:!0}),l.a.createElement(P.a.Item,null,l.a.createElement(P.a.Header,null,l.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},"Facts Sheet (EFL)"))),l.a.createElement(P.a.Item,null,l.a.createElement(P.a.Header,null,l.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},"Terms of Service")))))}function A(e){var a=Object(n.useState)(0),t=Object(s.a)(a,2),r=t[0],c=t[1],o=Object(n.useState)(!1),i=Object(s.a)(o,2),m=i[0],u=i[1],d=Object(n.useContext)(p),E=d.compareList,h=d.setCompareList,f=e.sortedState,g=e.plan,v=g.plan_id,b=g.plan_name,y=g.company_logo,C=g.rating_total,S=g.price_kwh500,O=g.price_kwh1000,L=g.price_kwh2000,R=g.pricing_details,P=g.renewable_energy_description,A=g.term_value,F=g.rate_type,B=g.fact_sheet,D=g.terms_of_service;function U(e,a){c(1===r?0:1)}var Z=l.a.createElement(k.a.Row,{positive:m},l.a.createElement(H,{logo:y,rating:C}),l.a.createElement(z,{price:S,priceLevel:"500",sortedState:f}),l.a.createElement(z,{price:O,priceLevel:"1000",sortedState:f}),l.a.createElement(z,{price:L,priceLevel:"2000",sortedState:f}),l.a.createElement(k.a.Cell,{className:"checkbox-cell",textAlign:"right",collapsing:!0},l.a.createElement(j.a,{onChange:function(e,a){e.preventDefault(),a.checked?(u(!0),h([].concat(Object(N.a)(E),[v]))):(u(!1),h(E.filter(function(e){return e!==v})))}}))),$=l.a.createElement(k.a,{className:"details-table",unstackable:!0},l.a.createElement(k.a.Header,null,l.a.createElement(k.a.Row,null,l.a.createElement(k.a.HeaderCell,null,"Plan Details"),l.a.createElement(k.a.HeaderCell,null,"Pricing"))),l.a.createElement(k.a.Body,null,l.a.createElement(k.a.Row,null,l.a.createElement(T,{name:b,renewablePercent:P,planType:F,contractLength:A}),l.a.createElement(I,{details:R,eflURL:B,termsURL:D})))),J=l.a.createElement(k.a.Row,{positive:m},l.a.createElement(k.a.Cell,{colSpan:"12",className:"accordion-row",style:{padding:"0",paddingTop:"0"}},l.a.createElement(x.a,{className:"accordion-cursor"},l.a.createElement(x.a.Title,{className:"plan-dropdown"+(1===r?" hidden":""),active:1!==r,index:0,onClick:U},l.a.createElement("p",{style:{fontSize:".8rem",textAlign:"center",marginBottom:"2px"}},"More Details"),l.a.createElement(w.a,{className:"dropdown-icon",name:"dropdown"})),l.a.createElement(x.a.Content,{active:1===r},l.a.createElement(_.a,{animateOpacity:!0,duration:300,height:r?"auto":0},$,l.a.createElement("div",{className:"plan-dropup accordion-cursor",onClick:U},l.a.createElement(w.a,{className:"dropup-icon",name:"dropdown",onClick:U})))))));return l.a.createElement(l.a.Fragment,null,Z,J)}function F(){var e=Object(n.useContext)(p),a=e.plans,t=e.setPlans,r=e.isLoading,c=Object(n.useState)({column:null,direction:null}),o=Object(s.a)(c,2),i=o[0],m=o[1];function u(e){if(i.column===e)t(a.reverse()),m({column:i.column,direction:"ascending"===i.direction?"descending":"ascending"});else switch(m({column:e,direction:"ascending"}),e){case"500":t(a.sort(function(e,a){return e.price_kwh500-a.price_kwh500}));break;case"1000":t(a.sort(function(e,a){return e.price_kwh1000-a.price_kwh1000}));break;case"2000":t(a.sort(function(e,a){return e.price_kwh2000-a.price_kwh2000}))}}var d=a.slice(0,20).map(function(e){return l.a.createElement(A,{key:e.plan_id,plan:e,sortedState:i})});return l.a.createElement("div",{className:"plan-viewer"},l.a.createElement(k.a,{sortable:!0,unstackable:!0},l.a.createElement(k.a.Header,null,l.a.createElement(k.a.Row,{disabled:r},l.a.createElement(k.a.HeaderCell,{textAlign:"left"},"Company"),l.a.createElement(k.a.HeaderCell,{sorted:"500"===i.column?i.direction:null,onClick:function(){return u("500")},collapsing:!0,textAlign:"center"},"500",l.a.createElement("br",null),l.a.createElement("span",{style:{fontSize:".7rem"}},"kWh")),l.a.createElement(k.a.HeaderCell,{sorted:"1000"===i.column?i.direction:null,onClick:function(){return u("1000")},collapsing:!0,textAlign:"center"},"1000",l.a.createElement("br",null),l.a.createElement("span",{style:{fontSize:".7rem"}},"kWh")),l.a.createElement(k.a.HeaderCell,{sorted:"2000"===i.column?i.direction:null,onClick:function(){return u("2000")},collapsing:!0,textAlign:"center"},"2000",l.a.createElement("br",null),l.a.createElement("span",{style:{fontSize:".7rem"}},"kWh")),l.a.createElement(k.a.HeaderCell,null))),l.a.createElement(k.a.Body,null,r?l.a.createElement(k.a.Row,null,l.a.createElement(k.a.Cell,{colSpan:"12"},l.a.createElement(S.a,{active:r,inline:"centered"}))):d.length?d:l.a.createElement(k.a.Row,null,l.a.createElement(k.a.Cell,null,"No results found.")))))}function B(e){return l.a.createElement("div",null,l.a.createElement(E.a,{hidden:!0}),l.a.createElement("div",{className:"container-header"},l.a.createElement("div",{className:"header-home"},l.a.createElement(w.a,{name:"home",size:"large",link:!0,onClick:function(){e.history.push("/")}})),l.a.createElement(h.a,{className:"header-results",as:"h1"},"TX Energy Plans"),l.a.createElement("div",{className:"header-spacer"})),l.a.createElement(y,null),l.a.createElement(F,null))}c.a.render(l.a.createElement(function(){var e=Object(n.useState)([]),a=Object(s.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)(!1),o=Object(s.a)(c,2),E=o[0],h=o[1],f=Object(n.useState)([]),g=Object(s.a)(f,2),v=g[0],b=g[1];function w(){return(w=Object(m.a)(i.a.mark(function e(a){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://cors-anywhere.herokuapp.com/http://www.powertochoose.org/en-us/service/v1/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parameters:{method:"plans",zip_code:a}})});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,console.dir(n),r(n),h(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}))).apply(this,arguments)}return l.a.createElement(u.a,{basename:"/energy-plans-viewer"},l.a.createElement(p.Provider,{value:{plans:t,setPlans:r,isLoading:E,compareList:v,setCompareList:b,handleZipSubmit:function(e){h(!0),/^[0-9]{5}$/.test(e)?function(e){w.apply(this,arguments)}(e):r([])}}},l.a.createElement("main",null,l.a.createElement(d.a,{exact:!0,path:"/",component:C}),l.a.createElement(d.a,{path:"/app/results",component:B}))))},null),document.getElementById("root"))}},[[190,1,2]]]);
//# sourceMappingURL=main.86ba2398.chunk.js.map